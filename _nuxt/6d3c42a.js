(this.webpackJsonp=this.webpackJsonp||[]).push([[7],{480:function(t,n,e){"use strict";e.r(n);e(301),e(41),e(64),e(5),e(16),e(14);var o=100,h=100,r=Math.PI/180*120,c=[],d=[],l=[],f=[],v=-1,y=-1,x=(new Date,[]);var m={name:"Boids",props:{num:{type:Number,default:50},debug:{type:Boolean,default:!1}},data:function(){return{canvas:null,canvasOffset:[0,0],ctx:null,looper:0,fps:0,flockCount:0}},mounted:function(){var t=this;setTimeout((function(){t.canvas=document.getElementById("content");var n,e,o=t.canvas.getBoundingClientRect();t.canvasOffset=[o.x,o.y],t.canvas.width=o.width,t.canvas.height=o.height,console.log(t.canvas.width,t.canvas.height),t.ctx=t.canvas.getContext("2d"),t.initChunks(),document.getElementsByClassName("canvasContent").forEach((function(n){t.registerBoundary(n.getBoundingClientRect())})),t.canvas.onmousemove=function(t){v=t.offsetX,y=t.offsetY},t.canvas.onmousedown=function(e){v=e.offsetX,y=e.offsetY,t.canvas.onmousemove=function(t){v=t.offsetX,y=t.offsetY},n=setInterval((function(){c.push(t.newBoid(v,y,c.length)),c.length>250&&c.shift()}),50)},t.canvas.ontouchstart=function(n){var o=n.touches[0];v=o.clientX-t.canvasOffset[0],y=o.clientY-t.canvasOffset[1],t.canvas.ontouchmove=function(n){var e=n.touches[0];v=e.clientX-t.canvasOffset[0],y=e.clientY-t.canvasOffset[1]},e=setInterval((function(){c.push(t.newBoid(v,y,c.length))}),50)},t.canvas.onmouseup=function(t){clearInterval(n)},t.canvas.ontouchend=function(n){v=-1,y=-1,t.canvas.ontouchmove=null,clearInterval(e)};for(var i=0;i<t.num;i++)c.push(t.newBoid(Math.random()*t.canvas.width,Math.random()*t.canvas.height,c.length));window.requestAnimationFrame(t.updateLoop)}),100)},beforeDestroy:function(){c=[],d=[],[],l=[],console.log("reset boid data")},computed:{},methods:{initChunks:function(){l=[];for(var t=0;t<this.canvas.height;t+=h){for(var n=[],i=0;i<this.canvas.width;i+=h)n.push([]);l.push(n)}f=JSON.parse(JSON.stringify(l)),console.log(l)},updateLoop:function(t){if(this.flockCount=c.length,this.fps=function(t){for(;x.length>0&&x[0]<=t-1e3;)x.shift();return x.push(t),x.length}(t),this.updateBoundaries(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.debug){for(var n=0,e=d;n<e.length;n++){var b=e[n];this.ctx.strokeStyle=this.$vuetify.theme.themes.dark.info,this.ctx.shadowBlur=0,this.ctx.strokeRect(b.left,b.top,b.right-b.left,b.bottom-b.top)}this.drawChunks(this.ctx)}for(var o=0,h=c;o<h.length;o++){var r=h[o];this.adjustVelocity(r),r.x+=r.dx,r.y+=r.dy,this.drawBoid(r,this.ctx)}l=JSON.parse(JSON.stringify(f)),window.requestAnimationFrame(this.updateLoop)},newBoid:function(t,n,e){var o={id:e,x:t,y:n,dx:20*Math.random()-5,dy:20*Math.random()-5,angle:0,on:Math.random()>.01},h=Math.atan2(o.dy,o.dx);return o.angle=h,o},drawBoid:function(t,n){t.angle=Math.atan2(t.dy,t.dx),t.on=t.on&&Math.random()>.99||!t.on&&Math.random()>.8?!t.on:t.on,this.debug&&t.id===c[0].id?(n.fillStyle="rgba(255,255,255, .4)",n.fillRect(Math.floor(t.x-t.x%h),Math.floor(t.y-t.y%h),h,h),n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(t.x+Math.cos(t.angle)*o,t.y+Math.sin(t.angle)*o),n.strokeStyle="#ff00ff",n.closePath(),n.stroke(),n.fillStyle=this.$vuetify.theme.themes.dark.success):n.fillStyle=t.on?this.$vuetify.theme.themes.dark.primary:"#666",n.translate(t.x,t.y),n.rotate(t.angle-90*Math.PI/180),n.translate(-t.x,-t.y),n.shadowColor=n.fillStyle,n.shadowBlur=t.on?4:0,n.font='15px "JetBrains Mono"',n.textAlign="center",n.fillText("V",t.x,t.y),this.debug&&(t.id,c[0].id),n.setTransform(1,0,0,1,0,0)},drawChunks:function(t){for(var i=0;i<l.length;i++)for(var n=0;n<l[i].length;n++)t.strokeWidth=2,t.strokeStyle="rgba(255,255,255,.1)",t.strokeRect(n*h,i*h,h,h)},inView:function(t,n,e){var h=n-t.x,c=e-t.y,d=Math.atan2(c,h)-t.angle;return!(d>=0&&d>r||d<=0&&d<-r)&&Math.sqrt(h*h+c*c)<o},adjustVelocity:function(t){for(var n=0,e=0,o=0,h=0,r=0,d=0,l=0,f=0,v=c;f<v.length;f++){var y=v[f];if(y.id!==t.id&&this.inView(t,y.x,y.y)){this.debug&&t.id===c[0].id&&(this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(y.x,y.y),this.ctx.strokeStyle="rgba(0, 255, 0, 1)",this.ctx.stroke()),n+=1,e+=y.x,o+=y.y;var x=t.x-y.x,m=t.y-y.y,w=Math.sqrt(x*x+m*m);w<30&&w>0&&(h+=x,r+=m),d+=y.dx,l+=y.dy}}n&&(e/=n,o/=n,t.dx+=.001*(e-t.x),t.dy+=.001*(o-t.y),d/=n,l/=n,t.dx+=.01*h,t.dy+=.01*r,t.dx+=.01*(d-t.dx),t.dy+=.01*(l-t.dy)),this.avoidBoundaries(t),this.targetMouse(t),this.normalizeSpeed(t)},avoidBoundaries:function(t){var n=200;t.x<n&&(t.dx+=5/Math.abs(t.x)),t.x>this.canvas.width-n&&(t.dx-=5/Math.abs(this.canvas.width-t.x)),t.y<n&&(t.dy+=5/Math.abs(t.y)),t.y>this.canvas.height-n&&(t.dy-=5/Math.abs(this.canvas.height-t.y));for(var e=0,o=d;e<o.length;e++){var h=o[e];if(t.y>=h.top&&t.y<=h.bottom){var r=t.x-h.right,c=t.x-h.left;Math.abs(r)>Math.abs(c)?this.inView(t,h.left,t.y)&&(t.dx-=5/Math.abs(c)):this.inView(t,h.right,t.y)&&(t.dx+=5/Math.abs(r))}if(t.x>=h.left&&t.x<=h.right){var l=t.y-h.top,f=t.y-h.bottom;Math.abs(f)>Math.abs(l)?this.inView(t,t.x,h.top)&&(t.dy-=5/Math.abs(l)):this.inView(t,t.x,h.bottom)&&(t.dy+=5/Math.abs(f))}}},targetMouse:function(t){var n=15e-5;if(!(v<0&&y<0)){var e=v-t.x,o=y-t.y;t.dx+=e*n,t.dy+=o*n}},normalizeSpeed:function(t){var n=Math.sqrt(t.dx*t.dx+t.dy*t.dy);n>5&&(t.dx=t.dx/n*5,t.dy=t.dy/n*5)},registerBoundary:function(t){var n=t.left,e=t.top,o=t.right,h=t.bottom,r={top:e-this.canvasOffset[1]-3,left:n-this.canvasOffset[0]-3,right:o-this.canvasOffset[0]+6,bottom:h-this.canvasOffset[1]+6};d.push(r)},updateBoundaries:function(){var t=this,n=document.getElementsByClassName("canvasContent");n.length!==d.length&&(d=[],n.forEach((function(n){t.registerBoundary(n.getBoundingClientRect())})))}}},w=e(35),component=Object(w.a)(m,(function(){var t=this,n=t._self._c;return n("div",{staticClass:"parent"},[t.debug||t.$vuetify.breakpoint.lgAndUp?n("span",{staticClass:"grey--text canvasContent",style:"font-family: 'JetBrains Mono'; display: inline-block; ".concat(t.$vuetify.breakpoint.smAndDown?"position: absolute; top: 20px; left: 20px; font-size: 13px;":"position: absolute; left: 20px; bottom: 20px;")},[t._v("BOIDS: "+t._s(t.flockCount))]):t._e(),t._v(" "),n("span",{staticClass:"grey--text canvasContent",style:"font-family: 'JetBrains Mono'; ".concat(t.$vuetify.breakpoint.smAndDown?"position: absolute; top: 20px; right: 20px; font-size: 13px;":"position: absolute; bottom: 20px; right: 20px;")},[t._v("FPS: "+t._s(t.fps))]),t._v(" "),n("canvas",{staticStyle:{position:"absolute",width:"100%",height:"100%",top:"0",left:"0"},attrs:{id:"content",width:"100%",height:"100%"}}),t._v(" "),t._t("default",null,{contentId:"canvasContent"})],2)}),[],!1,null,null,null);n.default=component.exports}}]);